<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Case Competition Management | CMIS Connect</title>

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/project/styles/homepage.css">

  <style>
    .page-wrap { max-width: 1100px; margin: 2rem auto; padding: 0 1.25rem; }

    .panel {
      background: white;
      border-radius: 14px;
      padding: 1.75rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border-left: 8px solid #500000;
    }

    .panel h2 {
      margin-top: 0;
      color: #500000;
      font-size: 1.8rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    label { font-weight: 600; color: #500000; display:block; margin-top:0.6rem; }
    input, textarea, select {
      width: 100%;
      padding: 0.5rem;
      font-family: 'Oswald', sans-serif;
      margin-top: 0.25rem;
    }

    button {
      margin-top: 0.75rem;
      padding: 0.55rem 1rem;
      font-family: 'Oswald', sans-serif;
      font-weight: 600;
      background: #500000;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    button.secondary {
      background: rgba(80,0,0,0.12);
      color: #500000;
    }

    .hidden { display: none; }

    .note {
      background: rgba(80,0,0,0.08);
      padding: 0.75rem 1rem;
      border-radius: 10px;
      margin-top: 0.75rem;
      font-size: 0.95rem;
    }

    .list-item {
      padding: 0.5rem 0;
      border-bottom: 1px solid #ddd;
    }
  </style>
</head>

<body>

<header>
  <h1>CMIS Connect</h1>
  <h2>Texas A&amp;M University</h2>
</header>

<section class="top-nav">
  <div><p>CMIS Connect</p></div>
  <ul class="menu">
    <li><a href="/project/webpages/homepage.html">Home</a></li>
    <li><a href="/project/webpages/student-hub.html">Student Hub</a></li>
    <li><a href="/project/webpages/case-management.html" class="current">Case Mgmt</a></li>
  </ul>
</section>

<main class="page-wrap">

  <!-- PUBLIC OVERVIEW -->
  <section class="panel">
    <h2>Case Competition Management</h2>
    <p>
      This module allows faculty to manage the full lifecycle of CMIS case competitions —
      from setup and team formation to judging, scoring, and results publication.
    </p>
    <div class="note">
      <strong>Prototype note:</strong> Advanced functionality appears after faculty login.
    </div>
  </section>

  <!-- FACULTY LOGIN -->
  <section class="panel" id="login-panel">
    <h2>Faculty Login</h2>
    <label>Email</label>
    <input id="faculty-email" type="email" placeholder="faculty@tamu.edu">

    <label>Password</label>
    <input type="password" placeholder="••••••">

    <button id="login-btn">Login (Prototype)</button>
  </section>

  <!-- DASHBOARD -->
  <section class="panel hidden" id="dashboard">

    <h2>Faculty Dashboard</h2>

    <!-- CREATE COMPETITION -->
    <div class="panel">
      <h3>Create Competition</h3>
      <label>Competition Name</label>
      <input id="comp-name">

      <label>Deadline</label>
      <input type="date" id="comp-deadline">

      <label>Description</label>
      <textarea id="comp-desc"></textarea>

      <button onclick="addCompetition()">Create Competition</button>
    </div>

    <!-- COMPETITIONS -->
    <div class="panel">
      <h3>Competitions</h3>
      <div id="competition-list"></div>
    </div>

    <!-- RUBRIC -->
    <div class="panel">
      <h3>Rubric Builder</h3>
      <label>Category</label>
      <input id="rubric-name">

      <label>Weight (%)</label>
      <input id="rubric-weight" type="number">

      <button onclick="addRubric()">Add Category</button>
      <div id="rubric-list"></div>
    </div>

    <!-- JUDGING -->
    <div class="panel">
      <h3>Judge Scoring (Prototype)</h3>
      <label>Team Name</label>
      <input id="judge-team">

      <label>Score</label>
      <input type="number" id="judge-score">

      <button onclick="addScore()">Submit Score</button>
      <div id="score-list"></div>
    </div>

    <!-- RESULTS -->
    <div class="panel">
      <h3>Results</h3>
      <button class="secondary" onclick="toggleResults()">Publish / Hide Results</button>
      <div id="results" class="hidden"></div>
    </div>

  </section>

</main>

<footer>
  <p>&copy; 2025 CMIS Connect | Texas A&amp;M University</p>
</footer>

<script>
  const loginPanel = document.getElementById("login-panel");
  const dashboard = document.getElementById("dashboard");

  const competitions = JSON.parse(localStorage.getItem("cmis_comps")) || [];
  const rubric = JSON.parse(localStorage.getItem("cmis_rubric")) || [];
  const scores = JSON.parse(localStorage.getItem("cmis_scores")) || [];

  document.getElementById("login-btn").onclick = () => {
    loginPanel.classList.add("hidden");
    dashboard.classList.remove("hidden");
    renderAll();
  };

  function addCompetition() {
    competitions.push({
      name: compName.value,
      deadline: compDeadline.value
    });
    localStorage.setItem("cmis_comps", JSON.stringify(competitions));
    renderComps();
  }

  function addRubric() {
    rubric.push({ name: rubricName.value, weight: rubricWeight.value });
    localStorage.setItem("cmis_rubric", JSON.stringify(rubric));
    renderRubric();
  }

  function addScore() {
    scores.push({ team: judgeTeam.value, score: Number(judgeScore.value) });
    localStorage.setItem("cmis_scores", JSON.stringify(scores));
    renderScores();
  }

  function toggleResults() {
    document.getElementById("results").classList.toggle("hidden");
    renderResults();
  }

  function renderComps() {
    competitionList.innerHTML = competitions.map(c =>
      `<div class="list-item"><strong>${c.name}</strong> – due ${c.deadline}</div>`
    ).join("");
  }

  function renderRubric() {
    rubricList.innerHTML = rubric.map(r =>
      `<div class="list-item">${r.name} (${r.weight}%)</div>`
    ).join("");
  }

  function renderScores() {
    scoreList.innerHTML = scores.map(s =>
      `<div class="list-item">${s.team}: ${s.score}</div>`
    ).join("");
  }

  function renderResults() {
    results.innerHTML = scores
      .sort((a,b)=>b.score-a.score)
      .map((s,i)=>`<div class="list-item">${i+1}. ${s.team} – ${s.score}</div>`)
      .join("");
  }

  function renderAll() {
    renderComps(); renderRubric(); renderScores();
  }
</script>

</body>
</html>
